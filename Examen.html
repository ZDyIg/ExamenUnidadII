<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> PARKING JAM 3D </title>
</head>

<body>

    <canvas id="canvas" width="800" height="800"> </canvas>
    <script type="text/javascript">
        const DOC = document.getElementById("canvas");
        const context = DOC.getContext("2d");
        let selectRect = null;


        function getRandomColor() {
            var trans = '0.5'; // 50% transparency
            var color = 'rgba(';
            for (var i = 0; i < 3; i++) {
                color += Math.floor(Math.random() * 255) + ',';
            }
            color += trans + ')'; // add the transparency
            return color;
        }

        let rectangles = [];

        for (let i = 0; i < 5; i++) {
            rectangles.push({
                x: Math.random() * (canvas.width - 70),
                y: Math.random() * (canvas.height - 40),

                width: 70,
                height: 40,
                color: getRandomColor(),
                //velocidades
                speedX: 5,
                speedY: 5,
            });
        }

        function drawRectangles() {
            console.log();
            context.clearRect(0, 0, canvas.width, canvas.height);
            rectangles.forEach(rect => {
                context.fillStyle = rect.color;
                context.fillRect(rect.x, rect.y, rect.width, rect.height);

                //borde negro para selecciÃ²n
                if (rect === selectRect) {
                    context.strokeStyle = 'black';
                    context.lineWidth = 6;
                    context.stokeRect(rect.x, rect.y, rect.width, rect.height); F
                }

            });
        }

        canvas.addEventListener('click', function (event) {
            console.log();
            const mouseX = event.offsetX;
            const mouseY = event.offsetY;

            selectRect = null;
            rectangles.forEach(rect => {
                if (
                    mouseX >= rect.x &&
                    mouseX <= rect.x + rect.width &&
                    mouseY >= rect.y &&
                    mouseY <= rect.y + rect.height
                ) {
                    selectRect = rect;
                }
            });

            drawRectangles();

        });

        //MOVER CON TECLAS
        document.addEventListener('keydown', function (event) {
            if (selectRect) {
                switch (event.key) {
                    case 'ArrowRight':
                        if (selectRect.x + selectRect.width + selectRect.speedX <= canvas.width) {
                            selectRect.x += selectRect.speedX;
                        }
                        break;
                    case 'ArrowLeft':
                        if (selectRect.x - selectRect.speedX >= 0) {
                            selectRect.x -= selectRect.speedX;
                        }
                        break;
                    case 'ArrowUp':
                        if (selectRect.y - selectRect.speedY >= 0) {
                            selectRect.y -= selectRect.speedY;
                        }
                        break;
                    case 'ArrowDown':
                        if (selectRect.y + selectRect.height + selectRect.speedY <= canvas.height) {
                            selectRect.y += selectRect.speedY;
                        }
                        break;
                    default:
                        break;
                }
                drawRectangles();
            }
        });


        // document.addEventListener('keydown', function(event){
        //     if(selectRect){
        //         if(event.key === 'ArrowRight'){
        //             selectRect.x += selectRect.speedX;
        //         }
        //     }
        // })


        drawRectangles();


        // const sellSize = 100;
        // const numCars = 10;
        // let x = 100;
        // let y = 100;




        // function getRandomColor() {
        //     var trans = '0.5'; // 50% transparency
        //     var color = 'rgba(';
        //     for (var i = 0; i < 3; i++) {
        //         color += Math.floor(Math.random() * 255) + ',';
        //     }
        //     color += trans + ')'; // add the transparency
        //     return color;
        // }

        // function getRandomColor() {
        //     return 'rgba(255, 0, 0, 0.5)'; // Color rojo semitransparente
        // }

        // class Cars {
        //     constructor(width, height, x, y, direction, isExitCar = false) {
        //         this.color = this.getRandomColor();
        //         this.width = width;
        //         this.height = height;
        //         this.x = x;
        //         this.y = y;
        //         this.direction = direction;
        //         this.isExitCar = isExitCar;
        //     }

        //     draw(context) {
        //         context.fillStyle = this.color;
        //         context.fillRect(this.x, this.y, this.width, this.height);
        //     }

        //     //movimiento del auto
        //     move(moveX, moveY) {
        //         this.x += moveX;
        //         this.y += moveY;
        //     }




        //     //choque de autos
        //     colision(cars) {
        //         for (let car of cars) {
        //             if (this !== car) {
        //                 if (
        //                     this.x < car.x + car.width &&
        //                     this.x + this.width > car.x &&
        //                     this.y < car.y + car.height &&
        //                     this.y + this.height > car.y
        //                 ) {
        //                     return true;
        //                 }
        //             }
        //         }
        //         return false;
        //     }
        // }


        // function getRandomPosition(canvasWidth, canvasHeight, sellSize) {
        //     const carsSize = sellSize;

        //     const x = Math.floor(Math.random() * (canvasWidth - carsSize));
        //     const y = Math.floor(Math.random() * (canvasHeight - carsSize));

        //     return {
        //         x,
        //         y,
        //         carsSize
        //     };

        // }



        // function createRandomCars(numCars, canvasWidth, canvasHeight, sellSize) {
        //     const cars = [];
        //     for (let i = 0; i < numCars; i++) {
        //         const { x, y } = getRandomPosition(canvasWidth, canvasHeight, sellSize);
        //         const direction = Math.random() > 0.5 ? 'horizontal' : 'vertical';
        //         const isExitCar = i === numCars - 1;

        //         cars.push(new Cars(x, y, sellSize, sellSize, direction, isExitCar));
        //     }
        //     return cars;
        // }

        // let cars = createRandomCars(numCars, canvasWidth, canvasHeight, sellSize);

        // function drawCars() {
        //     context.clearRect(0, 0, canvasWidth, canvasHeight);
        //     cars.forEach(car => car.draw(context));
        // }

        // drawCars();



    </script>


    <style type="text/css">
        body {
            background-color: #e0e0e0;
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        canvas {
            background-color: #ffffff;
            border: 5px solid #333;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
            border-radius: 15px;
        }

        /*Estilo para el contenedor*/
        .canvas-container {
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 20px;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
            display: inline-block;
        }
    </style>

</body>

</html>