<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> PARKING JAM 3D </title>
</head>

<body>

    <canvas id="canvas" width="800" height="800"> </canvas>
    <script type="text/javascript">
        const DOC = document.getElementById("canvas");
        const context = DOC.getContext("2d");

        const sellSize = 100;
        const canvasWidth = 800;
        const canvasHeight = 800;
        const numCars = 10;
        let x = 100;
        let y = 100;


        // function getRandomColor() {
        //     var trans = '0.5'; // 50% transparency
        //     var color = 'rgba(';
        //     for (var i = 0; i < 3; i++) {
        //         color += Math.floor(Math.random() * 255) + ',';
        //     }
        //     color += trans + ')'; // add the transparency
        //     return color;
        // }

        function getRandomColor() {
            return 'rgba(255, 0, 0, 0.5)'; // Color rojo semitransparente
        }

        class Cars {
            constructor(width, height, x, y, direction, isExitCar = false) {
                this.color = this.getRandomColor();
                this.width = width;
                this.height = height;
                this.x = x;
                this.y = y;
                this.direction = direction;
                this.isExitCar = isExitCar;
            }

            draw(context) {
                context.fillStyle = this.color;
                context.fillRect(this.x, this.y, this.width, this.height);
            }

            //movimiento del auto
            move(moveX, moveY) {
                this.x += moveX;
                this.y += moveY;
            }




            //choque de autos
            colision(cars) {
                for (let car of cars) {
                    if (this !== car) {
                        if (
                            this.x < car.x + car.width &&
                            this.x + this.width > car.x &&
                            this.y < car.y + car.height &&
                            this.y + this.height > car.y
                        ) {
                            return true;
                        }
                    }
                }
                return false;
            }
        }


        function getRandomPosition(canvasWidth, canvasHeight, sellSize) {
            const carsSize = sellSize;

            const x = Math.floor(Math.random() * (canvasWidth - carsSize));
            const y = Math.floor(Math.random() * (canvasHeight - carsSize));

            return {
                x,
                y,
                carsSize
            };

        }



        function createRandomCars(numCars, canvasWidth, canvasHeight, sellSize) {
            const cars = [];
            for (let i = 0; i < numCars; i++) {
                const { x, y } = getRandomPosition(canvasWidth, canvasHeight, sellSize);
                const direction = Math.random() > 0.5 ? 'horizontal' : 'vertical';
                const isExitCar = i === numCars - 1;

                cars.push(new Cars(x, y, sellSize, sellSize, direction, isExitCar));
            }
            return cars;
        }

        let cars = createRandomCars(numCars, canvasWidth, canvasHeight, sellSize);

        function drawCars() {
            context.clearRect(0, 0, canvasWidth, canvasHeight);
            cars.forEach(car => car.draw(context));
        }

        drawCars();



    </script>


    <style type="text/css">
        body {
            background-color: #f3f3f3;
        }

        canvas{
            background-color: #f3f3f3;
        }
    </style>

</body>

</html>